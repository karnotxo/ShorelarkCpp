---
description: "Build system rules for CMake, compiler flags, and project configuration"
globs: ["**/CMakeLists.txt", "**/conanfile.txt", "**/*.cmake", "**/build/*.sh", "**/build/*.bat"]
alwaysApply: false
---
# Build and Dependency Rules

## CMake Configuration
cmake:
  minimum_version: 3.20
  presets:
    - debug
    - release
    - asan
    - ubsan
    - tsan
  features:
    - modern_cmake
    - target_based
    - find_package
    - install_rules

## Conan Package Manager
conan:
  version: 2.x
  required_packages:
    - catch2/3.4.0
    - range-v3/0.12.0
    - fmt/10.1.1
    - spdlog/1.12.0
    - tl-expected/1.1.0
  build_requires:
    - cmake/3.27.7
    - ninja/1.11.1
  options:
    shared: False
    fPIC: True

## Build Types
build_types:
  debug:
    optimization: -O0
    debug_info: true
    sanitizers: address,undefined
  release:
    optimization: -O3
    lto: true
    debug_info: false
  profile:
    optimization: -O2
    debug_info: true
    profiling: true

## Toolchain
toolchain:
  compiler: clang++
  standard: c++17
  warnings:
    - -Wall
    - -Wextra
    - -Werror
    - -Wconversion
    - -Wshadow
    - -Wnon-virtual-dtor
    - -Wold-style-cast
    - -Wcast-align
    - -Wunused
    - -Woverloaded-virtual
    - -Wpedantic
    - -Wdouble-promotion
    - -Wformat=2

## Dependencies
dependencies:
  external:
    fetch_content: false
    package_manager: true
    version_control: false
  internal:
    subdirectories: true
    install_rules: true 